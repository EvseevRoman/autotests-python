{"name": "Проверка работы валидного купона", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nCall log:\n  - navigating to \"https://pizzeria.skillbox.cc/\", waiting until \"domcontentloaded\"", "trace": "self = <test_flow_with_promo_code.TestFlowPromoCode object at 0x000001A7CBB194F0>\ngo_to_url = <function go_to_url.<locals>.callback at 0x000001A7CBF32790>\npage = <Page url='about:blank'>\n\n    @allure.title('Проверка работы валидного купона')\n    def test_valid_coupon_verification(self, go_to_url, page: Page):\n        \"\"\"\n        Сценарий №1\n        1. Заполните корзину любыми товарами.\n        2. Перейдите в окно оформления товаров.\n        3. Примените промокод GIVEMEHALYAVA.\n        4. Убедитесь, что конечная сумма заказа уменьшилась на 10%.\n    \n        Шаги:\n            1. Перейти на главную страницу\n            2. Навести курсор на любую пиццу в слайдере\n            3. Сделать клик по кнопке \"В корзину\"\n            4. Навести курсор на другую пиццу в слайдере\n            5. Сделать клик по кнопке \"В корзину\"\n            6. Перейти на страницу \"Оформление заказа\"\n            7. Проверить что нет активного купона, если есть удалить\n            9. Сделать клик по ссылке \"Нажмите для ввода купона\"\n            10. Ввести в поле купон\n            11. Нажать на кнопку \"Применить купон\"\n            12. Проверить, что сумма заказа уменьшилась на 10%\n    \n        Предусловие: пользователь зарегистрирован и авторизован на сайте https://pizzeria.skillbox.cc/\n    \n        Тестовые данные:\n             Username = zlo\n             Password = qwe123!@#\n             Coupon = GIVEMEHALYAVA\n        \"\"\"\n        path_order_subtotal = \"//tr[@class='cart-subtotal']//bdi\"\n        path_order_total = \"//tr[@class='order-total']//bdi\"\n        coupon = \"GIVEMEHALYAVA\"\n        username = \"zlo\"\n        password = \"qwe123!@#\"\n    \n>       go_to_url(\"https://pizzeria.skillbox.cc/\")\n\ntest_flow_with_promo_code.py:53: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\..\\..\\src\\actions\\callback\\go_to_url.py:9: in callback\n    page.goto(url, wait_until=\"domcontentloaded\")\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\sync_api\\_generated.py:9020: in goto\n    self._sync(\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_page.py:552: in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_frame.py:145: in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py:61: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x000001A7CBB67790>\ncb = <function Channel.send.<locals>.<lambda> at 0x000001A7CBF23670>\nis_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nE           Call log:\nE             - navigating to \"https://pizzeria.skillbox.cc/\", waiting until \"domcontentloaded\"\n\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py:528: TimeoutError"}, "description": "\n        Сценарий №1\n        1. Заполните корзину любыми товарами.\n        2. Перейдите в окно оформления товаров.\n        3. Примените промокод GIVEMEHALYAVA.\n        4. Убедитесь, что конечная сумма заказа уменьшилась на 10%.\n\n        Шаги:\n            1. Перейти на главную страницу\n            2. Навести курсор на любую пиццу в слайдере\n            3. Сделать клик по кнопке \"В корзину\"\n            4. Навести курсор на другую пиццу в слайдере\n            5. Сделать клик по кнопке \"В корзину\"\n            6. Перейти на страницу \"Оформление заказа\"\n            7. Проверить что нет активного купона, если есть удалить\n            9. Сделать клик по ссылке \"Нажмите для ввода купона\"\n            10. Ввести в поле купон\n            11. Нажать на кнопку \"Применить купон\"\n            12. Проверить, что сумма заказа уменьшилась на 10%\n\n        Предусловие: пользователь зарегистрирован и авторизован на сайте https://pizzeria.skillbox.cc/\n\n        Тестовые данные:\n             Username = zlo\n             Password = qwe123!@#\n             Coupon = GIVEMEHALYAVA\n        ", "steps": [{"name": "Открываем страницу 'https://pizzeria.skillbox.cc/'", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.\nCall log:\n  - navigating to \"https://pizzeria.skillbox.cc/\", waiting until \"domcontentloaded\"\n\n", "trace": "  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"C:\\Users\\Lenovo\\OneDrive\\Рабочий стол\\Автотесты\\python-autotests-basic\\src\\actions\\callback\\go_to_url.py\", line 9, in callback\n    page.goto(url, wait_until=\"domcontentloaded\")\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 9020, in goto\n    self._sync(\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n"}, "parameters": [{"name": "url", "value": "'https://pizzeria.skillbox.cc/'"}], "start": 1749210622576, "stop": 1749210652590}], "parameters": [{"name": "browser_name", "value": "'chromium'"}], "start": 1749210622576, "stop": 1749210652591, "uuid": "1f969d38-cbb8-4271-8a4c-969ef2db667e", "historyId": "66a69f4ffcf20f310711ccdc61a5d252", "testCaseId": "826c6b094c90f17eba6b1aeda1a97cea", "fullName": "tests.the_final_work_on_autotests_in_python.flow_with_promo_code_and_playwright.test_flow_with_promo_code.TestFlowPromoCode#test_valid_coupon_verification", "labels": [{"name": "story", "value": "Флоу с промокодом и фреймворком playwright"}, {"name": "epic", "value": "Финальная работа по курсу «Автотесты на Python"}, {"name": "feature", "value": "Тестирование функционала сайта Pizzeria"}, {"name": "parentSuite", "value": "tests.the_final_work_on_autotests_in_python.flow_with_promo_code_and_playwright"}, {"name": "suite", "value": "test_flow_with_promo_code"}, {"name": "subSuite", "value": "TestFlowPromoCode"}, {"name": "host", "value": "Lenovo"}, {"name": "thread", "value": "19448-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.the_final_work_on_autotests_in_python.flow_with_promo_code_and_playwright.test_flow_with_promo_code"}]}