{"name": "Проверка работы купона, при не работающем сервере", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.Error: Locator.scroll_into_view_if_needed: Element is not attached to the DOM\nCall log:\n  - attempting scroll into view action\n  -     - waiting for element to be stable", "trace": "self = <test_flow_with_promo_code.TestFlowPromoCode object at 0x0000016A046FD370>\ngo_to_url = <function go_to_url.<locals>.callback at 0x0000016A04BDAB80>\npage = <Page url='https://pizzeria.skillbox.cc/checkout/'>\n\n    @allure.title('Проверка работы купона, при не работающем сервере')\n    def test_coupon_application_wthen_server_down(self, go_to_url, page: Page):\n        \"\"\"\n        Сценарий №3\n        1. Заполните корзину любыми товарами.\n        2. Перейдите в окно оформления товаров.\n        3. Примените промокод GIVEMEHALYAVA.\n        4. Перехватите запрос, уходящий с веба на сервер, и заблокируйте его. Не\n        возвращайте ответ или верните с ошибкой (500, например).\n        5. Убедитесь, что конечная сумма заказа НЕ уменьшилась на 10% и промокод не\n        применился.\n        6. Как думаете, как сайт должен отреагировать на такую ситуацию? Ожидаем ли\n        мы какого-нибудь сообщения для пользователя?\n    \n        Шаги:\n            1. Перейти на главную страницу\n            2. Навести курсор на любую пиццу в слайдере\n            3. Сделать клик по кнопке \"В корзину\"\n            4. Навести курсор на другую пиццу в слайдере\n            5. Сделать клик по кнопке \"В корзину\"\n            6. Перейти на страницу \"Оформление заказа\"\n            7. Проверить что нет активного купона, если есть удалить\n            9. Сделать клик по ссылке \"Нажмите для ввода купона\"\n            10. Ввести в поле купон\n            11. Нажать на кнопку \"Применить купон\"\n            12. Перехватить запрос и изменить сообщение\n    \n        Предусловие: пользователь зарегистрирован и авторизован на сайте https://pizzeria.skillbox.cc/\n    \n        Тестовые данные:\n             Username = zlo\n             Password = qwe123!@#\n             Coupon = GIVEMEHALYAVA\n        \"\"\"\n        path_order_subtotal = \"//tr[@class='cart-subtotal']//bdi\"\n        path_order_total = \"//tr[@class='order-total']//bdi\"\n        coupon = \"GIVEMEHALYAVA\"\n        username = \"zlo\"\n        password = \"qwe123!@#\"\n    \n        def handle(route):\n            route.fulfill(\n                status=500,\n            )\n        page.route(\"**/?wc-ajax=apply_coupon\", handle)\n    \n        go_to_url(\"https://pizzeria.skillbox.cc/\")\n        login_user(page, username, password)\n        page.wait_for_timeout(1000)\n        filling_shopping_cart_goods(page)\n        page.wait_for_timeout(1000)\n>       checking_active_coupon(page)\n\ntest_flow_with_promo_code.py:174: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\..\\..\\src\\actions\\helper\\checking_active_coupon.py:16: in checking_active_coupon\n    page.locator(path_order_total).scroll_into_view_if_needed()\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\sync_api\\_generated.py:17383: in scroll_into_view_if_needed\n    self._sync(self._impl_obj.scroll_into_view_if_needed(timeout=timeout))\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_locator.py:556: in scroll_into_view_if_needed\n    return await self._with_element(\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_locator.py:116: in _with_element\n    return await task(\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_element_handle.py:107: in scroll_into_view_if_needed\n    await self._channel.send(\"scrollIntoViewIfNeeded\", locals_to_params(locals()))\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py:61: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x0000016A047196A0>\ncb = <function Channel.send.<locals>.<lambda> at 0x0000016A04BA4B80>\nis_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.Error: Locator.scroll_into_view_if_needed: Element is not attached to the DOM\nE           Call log:\nE             - attempting scroll into view action\nE             -     - waiting for element to be stable\n\nC:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py:528: Error"}, "description": "\n        Сценарий №3\n        1. Заполните корзину любыми товарами.\n        2. Перейдите в окно оформления товаров.\n        3. Примените промокод GIVEMEHALYAVA.\n        4. Перехватите запрос, уходящий с веба на сервер, и заблокируйте его. Не\n        возвращайте ответ или верните с ошибкой (500, например).\n        5. Убедитесь, что конечная сумма заказа НЕ уменьшилась на 10% и промокод не\n        применился.\n        6. Как думаете, как сайт должен отреагировать на такую ситуацию? Ожидаем ли\n        мы какого-нибудь сообщения для пользователя?\n\n        Шаги:\n            1. Перейти на главную страницу\n            2. Навести курсор на любую пиццу в слайдере\n            3. Сделать клик по кнопке \"В корзину\"\n            4. Навести курсор на другую пиццу в слайдере\n            5. Сделать клик по кнопке \"В корзину\"\n            6. Перейти на страницу \"Оформление заказа\"\n            7. Проверить что нет активного купона, если есть удалить\n            9. Сделать клик по ссылке \"Нажмите для ввода купона\"\n            10. Ввести в поле купон\n            11. Нажать на кнопку \"Применить купон\"\n            12. Перехватить запрос и изменить сообщение\n\n        Предусловие: пользователь зарегистрирован и авторизован на сайте https://pizzeria.skillbox.cc/\n\n        Тестовые данные:\n             Username = zlo\n             Password = qwe123!@#\n             Coupon = GIVEMEHALYAVA\n        ", "steps": [{"name": "Открываем страницу 'https://pizzeria.skillbox.cc/'", "status": "passed", "parameters": [{"name": "url", "value": "'https://pizzeria.skillbox.cc/'"}], "start": 1749210732741, "stop": 1749210734557}, {"name": "Авторизация пользователя", "status": "passed", "steps": [{"name": "Нажать на вкладку \"Мой аккаунт\"", "status": "passed", "start": 1749210734557, "stop": 1749210735735}, {"name": "Ввести в поле \"Имя или почта\": zlo", "status": "passed", "start": 1749210735735, "stop": 1749210735757}, {"name": "Ввести в поле пароль: qwe123!@#", "status": "passed", "start": 1749210735757, "stop": 1749210735776}, {"name": "Нажать на кнопку \"Войти\"", "status": "passed", "start": 1749210735776, "stop": 1749210736310}], "parameters": [{"name": "page", "value": "<Page url='https://pizzeria.skillbox.cc/'>"}, {"name": "username", "value": "'zlo'"}, {"name": "password", "value": "'qwe123!@#'"}], "start": 1749210734557, "stop": 1749210736310}, {"name": "Заполнение корзины товаром", "status": "passed", "steps": [{"name": "Перейти на главную страницу", "status": "passed", "start": 1749210737321, "stop": 1749210737538}, {"name": "Навести курсор на любую пиццу в слайдере", "status": "passed", "start": 1749210737538, "stop": 1749210739219}, {"name": "Сделать клик по кнопке \"В корзину\"", "status": "passed", "start": 1749210739219, "stop": 1749210740258}, {"name": "Навести курсор на другую пиццу в слайдере", "status": "passed", "start": 1749210740258, "stop": 1749210741640}, {"name": "Сделать клик по кнопке \"В корзину\"", "status": "passed", "start": 1749210741640, "stop": 1749210742688}], "parameters": [{"name": "page", "value": "<Page url='https://pizzeria.skillbox.cc/my-account/'>"}], "start": 1749210737320, "stop": 1749210742689}, {"name": "Проверка и удаление активного купона", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.Error: Locator.scroll_into_view_if_needed: Element is not attached to the DOM\nCall log:\n  - attempting scroll into view action\n  -     - waiting for element to be stable\n\n", "trace": "  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"C:\\Users\\Lenovo\\OneDrive\\Рабочий стол\\Автотесты\\python-autotests-basic\\src\\actions\\helper\\checking_active_coupon.py\", line 16, in checking_active_coupon\n    page.locator(path_order_total).scroll_into_view_if_needed()\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 17383, in scroll_into_view_if_needed\n    self._sync(self._impl_obj.scroll_into_view_if_needed(timeout=timeout))\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_locator.py\", line 556, in scroll_into_view_if_needed\n    return await self._with_element(\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_locator.py\", line 116, in _with_element\n    return await task(\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_element_handle.py\", line 107, in scroll_into_view_if_needed\n    await self._channel.send(\"scrollIntoViewIfNeeded\", locals_to_params(locals()))\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n"}, "steps": [{"name": "Перейти на страницу \"Оформление заказа\"", "status": "passed", "start": 1749210743705, "stop": 1749210743890}, {"name": "Сделать скролл к сумме заказа\"", "status": "broken", "statusDetails": {"message": "playwright._impl._errors.Error: Locator.scroll_into_view_if_needed: Element is not attached to the DOM\nCall log:\n  - attempting scroll into view action\n  -     - waiting for element to be stable\n\n", "trace": "  File \"C:\\Users\\Lenovo\\OneDrive\\Рабочий стол\\Автотесты\\python-autotests-basic\\src\\actions\\helper\\checking_active_coupon.py\", line 16, in checking_active_coupon\n    page.locator(path_order_total).scroll_into_view_if_needed()\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 17383, in scroll_into_view_if_needed\n    self._sync(self._impl_obj.scroll_into_view_if_needed(timeout=timeout))\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_locator.py\", line 556, in scroll_into_view_if_needed\n    return await self._with_element(\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_locator.py\", line 116, in _with_element\n    return await task(\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_element_handle.py\", line 107, in scroll_into_view_if_needed\n    await self._channel.send(\"scrollIntoViewIfNeeded\", locals_to_params(locals()))\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n  File \"C:\\Users\\Lenovo\\miniconda3\\envs\\Skillbox_1\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n"}, "start": 1749210743890, "stop": 1749210744750}], "parameters": [{"name": "page", "value": "<Page url='https://pizzeria.skillbox.cc/'>"}], "start": 1749210743704, "stop": 1749210744751}], "attachments": [{"name": "log", "source": "0fad69ce-3773-4ba1-b0a9-9cb68cf1de2a-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "browser_name", "value": "'chromium'"}], "start": 1749210732734, "stop": 1749210744751, "uuid": "1e42ac2a-99f5-48bc-88bd-3b355577dd38", "historyId": "9bceb0988a82be5ee768b4b11bbfa565", "testCaseId": "f3dea43b846c5ae155d7d0398f142de1", "fullName": "tests.the_final_work_on_autotests_in_python.flow_with_promo_code_and_playwright.test_flow_with_promo_code.TestFlowPromoCode#test_coupon_application_wthen_server_down", "labels": [{"name": "feature", "value": "Тестирование функционала сайта Pizzeria"}, {"name": "story", "value": "Флоу с промокодом и фреймворком playwright"}, {"name": "epic", "value": "Финальная работа по курсу «Автотесты на Python"}, {"name": "parentSuite", "value": "tests.the_final_work_on_autotests_in_python.flow_with_promo_code_and_playwright"}, {"name": "suite", "value": "test_flow_with_promo_code"}, {"name": "subSuite", "value": "TestFlowPromoCode"}, {"name": "host", "value": "Lenovo"}, {"name": "thread", "value": "20240-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.the_final_work_on_autotests_in_python.flow_with_promo_code_and_playwright.test_flow_with_promo_code"}]}