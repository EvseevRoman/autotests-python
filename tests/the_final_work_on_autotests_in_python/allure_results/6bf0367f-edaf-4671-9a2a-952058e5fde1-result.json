{"name": "Проверка успешной работы бонусной системы", "status": "failed", "statusDetails": {"message": "AssertionError: assert (885.0 * 0.85) == 885.0", "trace": "self = <test_flow_with_bonus_system.TestFlowBonusSystem object at 0x000002E6FAE9CE20>\ngo_to_url = <function go_to_url.<locals>.callback at 0x000002E6FB332DC0>\npage = <Page url='https://pizzeria.skillbox.cc/checkout/order-received/6498/?key=wc_order_A57FrAxpxIybr'>\n\n    @allure.title('Проверка успешной работы бонусной системы')\n    def test_flow_bonus_system(self, go_to_url, page: Page):\n        \"\"\"\n        Сценарий №5\n        1. Перейдите на страницу бонусной программы.\n        2. Введите нужные данные.\n        3. Дождитесь активации данных.\n        4. Убедитесь, что она прошла успешно.\n        5. Проверить валидацию полей при заполнении формы.\n    \n    \n        Шаги:\n            1. Перейти на вкладку \"Бонусная программа\"\n            2. Ввести в поле \"Имя\" валидное значение\n            3. Ввести в поле \"Телефон\" валидный номер\n            4. Нажать кнопку \"Оформить карту\"\n            5. Нажать кнопку \"Закрыть\" в появившемся pop-up\n            6. Перейти на главную страницу\n            7. Добавить товар в корзину\n            8. Перейти на страницу \"Оформить заказ\"\n            9. В поле \"Комментарии к заказу\" ввести номер телефона указанный при оформлении бонусной карты\n            10. Заполнить валидными значениями все обязательные поля формы \"Детали заказа\"\n            11. Нажать кнопку \"Оформить заказ\"\n            12. Проверить применение скидки в 15%\n    \n        Предусловие: пользователь зарегистрирован и авторизован на сайте https://pizzeria.skillbox.cc/\n    \n        Тестовые данные:\n             Username = zlo\n             Password = qwe123!@#\n        \"\"\"\n        path_order_subtotal = \"//th[contains(text(), 'Subtotal')]/following-sibling::td/span\"\n        path_order_total = \"//th[contains(text(), 'Total')]/following-sibling::td/span\"\n        path_note = \"//th[contains(text(), 'Note')]/following-sibling::td\"\n        path_page_bonus_system = \"(//a[contains(text(), 'Бонусная программа')])[1]\"\n        path_field_username = \"//input[@name='username']\"\n        path_field_telephone = \"//input[@name='billing_phone']\"\n        path_button_bonus = \"//button[@name='bonus']\"\n        path_message_success = \"//h3[contains(text(), 'Ваша карта оформлена')]\"\n        username = \"po14\"\n        password = \"qwe123!@#\"\n        bonus_telephone = \"89005000800\"\n    \n        go_to_url(\"https://pizzeria.skillbox.cc/\")\n        login_user(page, username, password)\n        with step('Перейти на вкладку \"Бонусная программа\"'):\n            page.locator(path_page_bonus_system).click()\n        with step('Ввести в поле \"Имя\" валидное значение'):\n            page.locator(path_field_username).clear()\n            page.locator(path_field_username).fill(username)\n        with step('Ввести в поле \"Телефон\" валидный номер'):\n            page.locator(path_field_telephone).clear()\n            page.locator(path_field_telephone).fill(bonus_telephone)\n        with step('Нажать кнопку \"Оформить карту\"'):\n            page.on(\"dialog\", lambda dialog: dialog.accept())\n            page.locator(path_button_bonus).click()\n            expect(page.locator(path_message_success)).to_be_visible(timeout=15000)\n        page.wait_for_timeout(1000)\n        filling_shopping_cart_goods(page)\n        page.wait_for_timeout(1000)\n        making_order(page, bonus_telephone)\n    \n        with step(f'Проверить, что к телефону: {bonus_telephone}, применилась скидка 15%'):\n            page.wait_for_timeout(1000)\n            page.locator(path_order_total).scroll_into_view_if_needed()\n            note = page.locator(path_note).inner_text()\n            order_subtotal = float(page.locator(path_order_subtotal).inner_text()[:-1].replace(',', '.'))\n            order_total = float(page.locator(path_order_total).inner_text()[:-1].replace(',', '.'))\n            assert note == bonus_telephone\n>           assert order_subtotal * 0.85 == order_total\nE           assert (885.0 * 0.85) == 885.0\n\nflow_with_bonus_system_in_playwright\\test_flow_with_bonus_system.py:84: AssertionError"}, "description": "\n        Сценарий №5\n        1. Перейдите на страницу бонусной программы.\n        2. Введите нужные данные.\n        3. Дождитесь активации данных.\n        4. Убедитесь, что она прошла успешно.\n        5. Проверить валидацию полей при заполнении формы.\n\n\n        Шаги:\n            1. Перейти на вкладку \"Бонусная программа\"\n            2. Ввести в поле \"Имя\" валидное значение\n            3. Ввести в поле \"Телефон\" валидный номер\n            4. Нажать кнопку \"Оформить карту\"\n            5. Нажать кнопку \"Закрыть\" в появившемся pop-up\n            6. Перейти на главную страницу\n            7. Добавить товар в корзину\n            8. Перейти на страницу \"Оформить заказ\"\n            9. В поле \"Комментарии к заказу\" ввести номер телефона указанный при оформлении бонусной карты\n            10. Заполнить валидными значениями все обязательные поля формы \"Детали заказа\"\n            11. Нажать кнопку \"Оформить заказ\"\n            12. Проверить применение скидки в 15%\n\n        Предусловие: пользователь зарегистрирован и авторизован на сайте https://pizzeria.skillbox.cc/\n\n        Тестовые данные:\n             Username = zlo\n             Password = qwe123!@#\n        ", "steps": [{"name": "Открываем страницу 'https://pizzeria.skillbox.cc/'", "status": "passed", "parameters": [{"name": "url", "value": "'https://pizzeria.skillbox.cc/'"}], "start": 1749394967293, "stop": 1749394968494}, {"name": "Авторизация пользователя", "status": "passed", "steps": [{"name": "Нажать на вкладку \"Мой аккаунт\"", "status": "passed", "start": 1749394968494, "stop": 1749394969023}, {"name": "Ввести в поле \"Имя или почта\": zlo", "status": "passed", "start": 1749394969023, "stop": 1749394969041}, {"name": "Ввести в поле пароль: qwe123!@#", "status": "passed", "start": 1749394969041, "stop": 1749394969050}, {"name": "Нажать на кнопку \"Войти\"", "status": "passed", "start": 1749394969050, "stop": 1749394969565}], "parameters": [{"name": "page", "value": "<Page url='https://pizzeria.skillbox.cc/'>"}, {"name": "username", "value": "'po14'"}, {"name": "password", "value": "'qwe123!@#'"}], "start": 1749394968494, "stop": 1749394969565}, {"name": "Перейти на вкладку \"Бонусная программа\"", "status": "passed", "start": 1749394969565, "stop": 1749394969783}, {"name": "Ввести в поле \"Имя\" валидное значение", "status": "passed", "start": 1749394969783, "stop": 1749394969820}, {"name": "Ввести в поле \"Телефон\" валидный номер", "status": "passed", "start": 1749394969820, "stop": 1749394969837}, {"name": "Нажать кнопку \"Оформить карту\"", "status": "passed", "start": 1749394969837, "stop": 1749394976852}, {"name": "Заполнение корзины товаром", "status": "passed", "steps": [{"name": "Перейти на главную страницу", "status": "passed", "start": 1749394977871, "stop": 1749394978044}, {"name": "Навести курсор на любую пиццу в слайдере", "status": "passed", "start": 1749394978044, "stop": 1749394979548}, {"name": "Сделать клик по кнопке \"В корзину\"", "status": "passed", "start": 1749394979550, "stop": 1749394980601}, {"name": "Навести курсор на другую пиццу в слайдере", "status": "passed", "start": 1749394980601, "stop": 1749394981463}, {"name": "Сделать клик по кнопке \"В корзину\"", "status": "passed", "start": 1749394981463, "stop": 1749394982512}], "parameters": [{"name": "page", "value": "<Page url='https://pizzeria.skillbox.cc/bonus/'>"}], "start": 1749394977870, "stop": 1749394982512}, {"name": "Проверка и удаление активного купона", "status": "passed", "steps": [{"name": "Перейти на страницу \"Оформление заказа\"", "status": "passed", "start": 1749394983517, "stop": 1749394983769}, {"name": "Ввести в поле \"Дата заказа\", завтрашнюю дату", "status": "passed", "start": 1749394983769, "stop": 1749394983987}, {"name": "Ввести в поле \"Комментарии к заказу\": 89005000800", "status": "passed", "start": 1749394983987, "stop": 1749394984003}, {"name": "Ввести в поле имя валидное значение", "status": "passed", "start": 1749394984003, "stop": 1749394984031}, {"name": "Ввести валидное значение в поле \"Фамилия\"", "status": "passed", "start": 1749394984031, "stop": 1749394984059}, {"name": "Ввести валидный адрес доставки", "status": "passed", "start": 1749394984059, "stop": 1749394984085}, {"name": "Ввести валидное название города", "status": "passed", "start": 1749394984085, "stop": 1749394984111}, {"name": "Ввести корректное название области", "status": "passed", "start": 1749394984111, "stop": 1749394984139}, {"name": "Ввести в поле \"Почтовый индекс\" валидный индекс", "status": "passed", "start": 1749394984139, "stop": 1749394984171}, {"name": "Ввести в поле \"Телефон\" валидный номер телефона", "status": "passed", "start": 1749394984171, "stop": 1749394984199}, {"name": "Сделать клик по кнопке \"Оплата при доставке\"", "status": "passed", "start": 1749394984199, "stop": 1749394984268}, {"name": "Сделать клик по чек-боксу", "status": "passed", "start": 1749394984268, "stop": 1749394984509}, {"name": "Сделать клик по кнопке \"Оформить заказ\"", "status": "passed", "start": 1749394984510, "stop": 1749394984548}], "parameters": [{"name": "page", "value": "<Page url='https://pizzeria.skillbox.cc/'>"}, {"name": "value_telephone", "value": "'89005000800'"}], "start": 1749394983517, "stop": 1749394984549}, {"name": "Проверить, что к телефону: 89005000800, применилась скидка 15%", "status": "failed", "statusDetails": {"message": "AssertionError: assert (885.0 * 0.85) == 885.0\n", "trace": "  File \"C:\\Users\\Lenovo\\OneDrive\\Рабочий стол\\Автотесты\\python-autotests-basic\\tests\\the_final_work_on_autotests_in_python\\flow_with_bonus_system_in_playwright\\test_flow_with_bonus_system.py\", line 84, in test_flow_bonus_system\n    assert order_subtotal * 0.85 == order_total\n"}, "start": 1749394984549, "stop": 1749394985649}], "attachments": [{"name": "log", "source": "c04cb1e1-7850-4378-afe6-0144a88c57eb-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "browser_name", "value": "'chromium'"}], "start": 1749394967293, "stop": 1749394985649, "uuid": "6f8a0663-d969-46e0-b5cd-fc6c72807cf9", "historyId": "6609aadd1c865b6ddd0ff25eb8bd1a34", "testCaseId": "9716a5fc0285976b590c55801963be85", "fullName": "tests.the_final_work_on_autotests_in_python.flow_with_bonus_system_in_playwright.test_flow_with_bonus_system.TestFlowBonusSystem#test_flow_bonus_system", "labels": [{"name": "epic", "value": "Финальная работа по курсу «Автотесты на Python"}, {"name": "feature", "value": "Тестирование функционала сайта Pizzeria"}, {"name": "story", "value": "Флоу с бонусной системой на фреймворке playwright"}, {"name": "parentSuite", "value": "tests.the_final_work_on_autotests_in_python.flow_with_bonus_system_in_playwright"}, {"name": "suite", "value": "test_flow_with_bonus_system"}, {"name": "subSuite", "value": "TestFlowBonusSystem"}, {"name": "host", "value": "Lenovo"}, {"name": "thread", "value": "12144-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.the_final_work_on_autotests_in_python.flow_with_bonus_system_in_playwright.test_flow_with_bonus_system"}]}